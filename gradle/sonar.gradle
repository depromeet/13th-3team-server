import java.util.stream.Collectors

var exclusionList = new ArrayList();
file('coverage-exclude.luffy').withInputStream(){
    exclusionList.addAll(new BufferedReader(new InputStreamReader(it))
            .lines()
            .parallel()
            .map(s -> s.substring(7).strip() + '.java')
            .collect(Collectors.toList())
    )
}

sonar {
    properties {
        property 'sonar.host.url', 'https://sonarcloud.io'
        property 'sonar.organization', 'depromeet-1'
        property 'sonar.projectKey', 'depromeet_na-lab-server'
        property 'sonar.exclusions', exclusionList
    }
}
