import java.util.stream.Collectors

StringBuilder excludeBuilder = new StringBuilder()
file('coverage-exclude.luffy').withInputStream(){
    it -> new BufferedReader(new InputStreamReader(it))
            .lines()
            .parallel()
            .map(s -> '**/' + s.substring(7).strip() + '.java')
            .forEach(s -> excludeBuilder.append('\'').append(s).append('\','))
}

sonar {
    properties {
        property 'sonar.host.url', 'https://sonarcloud.io'
        property 'sonar.organization', 'depromeet-1'
        property 'sonar.projectKey', 'depromeet_na-lab-server'
        property 'sonar.exclusions', "\"" + excludeBuilder.toString() + "\""
    }
}
